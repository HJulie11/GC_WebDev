(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{5265:function(e,t,l){Promise.resolve().then(l.bind(l,7747))},7155:function(e,t,l){"use strict";l.d(t,{default:function(){return o}});var r=l(7437);l(8877);var s=l(789),a=l(3884),n=l(2265);function o(e){let{children:t}=e;return(0,n.useEffect)(()=>{let e=localStorage.getItem("token");e&&console.log("Token found in localStorage:",e)},[]),console.log("MainLayout mounted"),(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)("main",{children:t}),(0,r.jsx)(a.Z,{})]})})})}},7747:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return f}});var r=l(7437),s=l(2265),a=l(8472),n=l(6648),o={src:"/GC_WebDev//_next/static/media/drag and drop.8600f21d.svg",height:50,width:50,blurWidth:0,blurHeight:0},i=e=>{let{onUpload:t}=e,l=(0,s.useRef)(null);return(0,r.jsxs)("div",{className:"flex flex-col center items-center justify-center border-dashed border-2 border-purple-heavy bg-purple-light bg-opacity-[0.8] w-[75%] h-[136px] rounded-[10px] mt-10 mb-5",onDrop:e=>{e.preventDefault(),t(Array.from(e.dataTransfer.files))},onDragOver:e=>e.preventDefault(),children:[(0,r.jsx)("input",{type:"file",accept:"audio/*",ref:l,style:{display:"none"},onChange:e=>{e.target.files&&t(Array.from(e.target.files))},multiple:!0}),(0,r.jsx)(n.default,{src:o,alt:"dragDrop"}),(0,r.jsx)("button",{className:"mt-3",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.click()},children:(0,r.jsx)("p",{className:"text-[23px] font-light mt-[10px]",children:"\uD83C\uDFA7 원하는 음원 업로드하기"})})]})},c=e=>{let{fileName:t}=e,[l,a]=(0,s.useState)(0);return console.log(t),(0,s.useEffect)(()=>{let e=setInterval(()=>{a(t=>t>=100?(clearInterval(e),100):t+10)},500);return()=>clearInterval(e)},[]),(0,r.jsx)("div",{className:"flex center items-center justify-center mb-2",children:(0,r.jsxs)("div",{className:"flex flex-col w-[1093px] h-[181px] bg-white border-[1.5px] border-purple-light rounded-[10px]",children:[(0,r.jsx)("div",{className:"text-[25px] font-bold ml-[30.5px] mt-[28px]",children:t}),(0,r.jsx)("div",{className:"w-[1032px] mt-[20px] ml-[30.5px]",children:(0,r.jsx)("div",{className:"relative h-4 rounded-full bg-gray-30",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 h-4 rounded-full bg-purple-heavy",style:{width:"".concat(l,"%")}})})}),(0,r.jsx)("div",{className:"text-[20px] font-semi-bold ml-[30.5px] mt-[10px] text-gray-30",children:l<100?"Uploading...":"Upload Complete"})]})})},d=()=>{let[e,t]=(0,s.useState)([]);return((0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){console.error("Token is missing");return}let l=await a.Z.get("http://localhost:4000/api/user/audio-files",{headers:{token:e}});t(l.data.audioFiles)}catch(e){console.error("Error fetching audio files:",e)}})()},[]),e&&0!==e.length)?(0,r.jsx)("div",{children:e.map((e,t)=>(0,r.jsx)(c,{fileName:e.fileName},t))}):(0,r.jsx)("div",{})},u=l(7155),f=()=>{let e=async e=>{try{let t=new FormData;e.forEach(e=>{t.append("audioFile",e)});let l=localStorage.getItem("token");if(console.log("Token:",l),!l){console.error("Token is missing");return}let r=await a.Z.post("http://localhost:4000/api/user/upload-audio",t,{headers:{token:l,"Content-Type":"multipart/form-data"}});r.data.success?console.log("Files uploaded successfully:",r.data.message):console.error("Failed to upload files:",r.data.message)}catch(e){console.error("Error uploading files:",e)}window.location.reload()};return(0,r.jsxs)(u.default,{children:[(0,r.jsx)("div",{className:"flex center items-center justify-center mt-10 mb-5",children:(0,r.jsx)("div",{className:"text-[30px] font-semi-bold text-purple-heavy",children:"나의 오디오"})}),(0,r.jsx)("div",{className:"flex center items-center justify-center",children:(0,r.jsx)(i,{onUpload:e})}),(0,r.jsx)(d,{})]})}},8877:function(){}},function(e){e.O(0,[404,138,472,648,882,971,23,744],function(){return e(e.s=5265)}),_N_E=e.O()}]);