(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6885:function(e,t,r){Promise.resolve().then(r.bind(r,2194))},3501:function(e,t,r){"use strict";r.d(t,{A:function(){return l}});var s=r(7437),a=r(2265),n=r(1467);let l=(0,a.createContext)({url:"http://localhost:4000",token:"",setToken:()=>{}});t.Z=e=>{let{children:t}=e,[r,o]=(0,a.useState)(n.Z.getItem("token")||"");return(0,a.useEffect)(()=>{let e=n.Z.getItem("token");e&&(o(e),console.log("Token found in localStorage:",e))},[]),(0,s.jsx)(l.Provider,{value:{url:"http://localhost:4000",token:r,setToken:o},children:t})}},2194:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(7437),a=r(2265),n=r(7138),l=r(3501),o=r(6463),c=r(8472),u=()=>{let{url:e,setToken:t}=(0,a.useContext)(l.A),r=(0,o.useRouter)(),[u,i]=(0,a.useState)({email:"",password:""}),[d,m]=(0,a.useState)(""),h=e=>{let t=e.target.name,r=e.target.value;i(e=>({...e,[t]:r}))},x=async s=>{s.preventDefault();try{let s=await c.Z.post("".concat(e,"/api/user/login"),u);s.data.success?(t(s.data.token),localStorage.setItem("token",s.data.token),console.log("Token set in localStorage:",s.data.token),r.push("/")):alert(s.data.message)}catch(e){console.error("Login error:",e),m("로그인 실패. 다시 시도해주세요.")}};return(0,s.jsxs)("div",{className:"flex flex-col center items-center justify-center h-[500px]",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-purple-heavy mb-5",children:"로그인"}),(0,s.jsxs)("form",{onSubmit:x,className:"flex flex-col gap-4 lg:w-[500px]",children:[(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:u.email,onChange:h,className:"p-2 border border-purple-light rounded"}),(0,s.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:u.password,onChange:h,className:"p-2 border border-purple-light rounded"}),d&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:d}),(0,s.jsx)("button",{type:"submit",className:"bg-purple-heavy text-white font-bold p-2 rounded text-center",children:"로그인"}),(0,s.jsxs)("div",{className:"flex flex-row center justify-center",children:[(0,s.jsx)(n.default,{href:"/register",children:(0,s.jsx)("p",{className:"text-sm text-center mr-10 underline text-grey-light",children:"회원가입"})}),(0,s.jsx)(n.default,{href:"/adminlogin",children:(0,s.jsx)("p",{className:"text-sm text-center underline text-grey-light",children:"관리자 로그인"})})]})]})]})},i=()=>{let[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(!1);return(0,s.jsx)(l.Z,{children:(0,s.jsx)("div",{className:"flex center items-center justify-center h-screen",children:(0,s.jsx)(u,{})})})}},1467:function(e,t){"use strict";class r{static setItem(e,t){localStorage.setItem(e,t)}static getItem(e){return localStorage.getItem(e)}static removeItem(e){localStorage.removeItem(e)}constructor(){}}t.Z=r},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[138,472,971,23,744],function(){return e(e.s=6885)}),_N_E=e.O()}]);