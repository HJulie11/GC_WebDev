(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6117:function(e,l,s){Promise.resolve().then(s.bind(s,7155)),Promise.resolve().then(s.bind(s,4972))},7155:function(e,l,s){"use strict";s.d(l,{default:function(){return n}});var t=s(7437);s(8877);var a=s(789),r=s(3884),i=s(2265);function n(e){let{children:l}=e;return(0,i.useEffect)(()=>{let e=localStorage.getItem("token");e&&console.log("Token found in localStorage:",e)},[]),console.log("MainLayout mounted"),(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{}),(0,t.jsx)("main",{children:l}),(0,t.jsx)(r.Z,{})]})})})}},4972:function(e,l,s){"use strict";var t=s(7437),a=s(2265),r=s(6463),i=s(8472),n=s(3501);l.default=()=>{let{url:e,setToken:l}=(0,a.useContext)(n.A);(0,r.useRouter)();let[s,c]=(0,a.useState)(""),[d,m]=(0,a.useState)({name:"",email:"",password:"",dateofbirth:"",mobilenumber:"",gender:"",address:"",institute:"",group:""});(0,a.useEffect)(()=>{(async()=>{try{let l=localStorage.getItem("token");if(!l){console.error("Token is missing");return}let s=await i.Z.get("".concat(e,"/api/user/myaccount"),{headers:{token:l}});console.log("Response data:",s.data);let t={name:s.data.name,email:s.data.email,password:s.data.password,dateofbirth:s.data.dateofbirth,mobilenumber:s.data.mobilenumber,gender:s.data.gender,address:s.data.address,institute:s.data.institute,group:s.data.group,image:s.data.image};m(t),c(t.image||"")}catch(e){console.error("Error fetching user data:",e)}})()},[]);let o=async l=>{l.preventDefault();try{let l=new FormData;Object.keys(d).forEach(e=>l.append(e,d[e])),s&&(l.append("image",s),await i.Z.put("".concat(e,"/user/updateProfile"),l,{headers:{"Content-Type":"multipart/form-data"}}),alert("Profile updated successfully"),window.location.reload())}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile")}};return(0,t.jsx)("div",{className:"flex center items-center justify-center p-20 bg-purple-light",children:(0,t.jsxs)("div",{className:"flex flex-row w-full h-full bg-white shadow-lg rounded-[5px] p-20",children:[(0,t.jsxs)("div",{className:"flex flex-col center items-center justify-center w-[30%] h-full p-3",children:[(0,t.jsx)("div",{className:"w-[60%] h-[200px] rounded-full bg-purple-light",children:(0,t.jsx)("label",{htmlFor:"image",children:(0,t.jsx)("img",{src:s?"object"==typeof s?URL.createObjectURL(s):"".concat(e,"/images/").concat(s):"",className:"w-full h-full rounded-full"})})}),(0,t.jsx)("label",{htmlFor:"image",style:{cursor:"pointer"},children:(0,t.jsx)("div",{className:"text-center text-[15px] underline text-purple-heavy mt-3",children:" 수정 "})}),(0,t.jsx)("input",{onChange:e=>{var l;let s=null===(l=e.target.files)||void 0===l?void 0:l[0];s&&c(s.name)},type:"file",id:"image",className:"mt-3 ",style:{display:"none"}}),(0,t.jsx)("div",{className:"mt-5 flex flex-row center items-center justify-center",children:(0,t.jsxs)("h1",{className:"regular-24 mr-2",children:["Welcome, ",(0,t.jsxs)("span",{className:"font-bold text-purple-heavy",children:["@",d.name]}),"!"]})})]}),(0,t.jsxs)("div",{className:"flex flex-col center items-center justify-center w-[70%] h-full p-10",children:[(0,t.jsxs)("form",{className:"flex flex-col w-full ",onSubmit:o,autoComplete:"off",children:[(0,t.jsx)("div",{className:"mt-0 ml-0 text-[25px] font-bold text-purple-heavy",children:"개인정보 "}),(0,t.jsxs)("div",{className:"flex flex-col mt-5 text-[15px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"이름 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.name})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"이메일 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.email})]}),(0,t.jsx)("div",{className:"flex flex-row items-center mb-3",children:(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"비밀번호 "})}),(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"생년월일 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.dateofbirth})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"전화번호 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.mobilenumber})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"성별 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.gender})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"주소 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.address})]}),d.institute&&(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"소속 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.institute})]}),d.group&&(0,t.jsxs)("div",{className:"flex flex-row items-center mb-3",children:[(0,t.jsx)("div",{className:"w-[45%] ml-0",children:"그룹 "}),(0,t.jsx)("div",{className:"w-[45%] mr-0 flexible-input text-gray-50",children:d.group})]})]}),(0,t.jsx)("div",{className:"w-full flex justify-center",children:(0,t.jsx)("button",{type:"submit",className:"w-[70%] h-[50px] mt-5 bg-gray-10 hover:bg-purple-heavy text-white rounded-lg",style:{transition:"0.2s ease"},children:"프로필 업데이트 "})})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full mt-10",children:[(0,t.jsx)("div",{className:"mt-0 ml-0 text-[25px] font-bold text-purple-heavy",children:"이용 정보 "}),(0,t.jsxs)("div",{className:"flex flex-row w-full h-[200px] border-t-1 border-b-1 mt-5 items-center",children:[(0,t.jsx)("div",{className:"w-[15%] flex center items-center justify-center",children:(0,t.jsx)("input",{type:"checkbox"})}),(0,t.jsx)("div",{className:"ml-3 mr-3 w-[85%] flex flex-col",children:(0,t.jsxs)("div",{className:"mb-5 flex flex-row",children:[(0,t.jsxs)("div",{className:"flex flex-col w-[60%] items-center",children:[(0,t.jsx)("div",{className:"relative w-full font-bold text-[30px]",children:(0,t.jsx)("p",{style:{position:"absolute",left:0,margin:0},children:"Plan Name"})}),(0,t.jsx)("div",{className:"relative w-full text-[15px] mt-10 text-gray-30",children:(0,t.jsx)("p",{style:{position:"absolute",left:0,margin:0},children:"Start date ~ End date"})})]}),(0,t.jsx)("div",{className:"flex items-center w-[40%]",children:(0,t.jsx)("div",{className:"relative w-full text-[20px]",children:(0,t.jsx)("p",{style:{position:"absolute",right:0,margin:0},children:"Plan cost"})})})]})})]})]})]})]})})}},6463:function(e,l,s){"use strict";var t=s(1169);s.o(t,"usePathname")&&s.d(l,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(l,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(l,{useSearchParams:function(){return t.useSearchParams}})},8877:function(){}},function(e){e.O(0,[404,138,472,648,882,971,23,744],function(){return e(e.s=6117)}),_N_E=e.O()}]);