(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{9464:function(e,t,n){Promise.resolve().then(n.bind(n,1831))},1831:function(e,t,n){"use strict";var s=n(7437),a=n(2265),l=n(7818),r=n(6463),o=n(3501),i=n(8472);let d=(0,l.default)(()=>n.e(432).then(n.bind(n,5432)),{loadableGenerated:{webpack:()=>[5432]},ssr:!1});t.default=()=>{let{url:e,setToken:t}=(0,a.useContext)(o.A),n=(0,r.useRouter)(),[l,u]=(0,a.useState)({adminname:"",email:"",password:"",confirmPassword:"",mobilenumber:"",address:"",institute:"",group:"",studentlist:null,groupadmin:null}),[c,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),j=e=>{let{name:t,value:n}=e.target;u(e=>({...e,[t]:n}))},w=(e,t)=>{e.target.files&&t(e.target.files[0])},y=async s=>{s.preventDefault();let a="".concat(e,"/api/admin/register");if(l.password!==l.confirmPassword){m("비밀번호와 비밀번호 확인이 일치하지 않습니다.");return}console.log("Form data:",l),console.log("Request URL:",a);let r=new FormData;r.append("adminname",l.adminname),r.append("email",l.email),r.append("password",l.password),r.append("mobilenumber",l.mobilenumber),r.append("address",l.address),r.append("institute",l.institute),r.append("group",l.group),x&&r.append("studentlist",x),b&&r.append("groupadmin",b);try{let e=await i.Z.post(a,r,{headers:{"Content-Type":"multipart/form-data"}});console.log("Response:",e),e.data.success?(t(e.data.token),localStorage.setItem("token",e.data.token),console.log("Token set in localStorage:",e.data.token),n.push("/adminhome")):m(e.data.message)}catch(e){console.error("Register error:",e),m("회원가입 실패. 다시 시도해주세요.")}};return(0,s.jsx)("div",{className:"flex items-center justify-center w-screen h-screen overflow:mt-[7rem] overflow:mb-[7rem]",children:(0,s.jsxs)("div",{className:"flex flex-col w-[60%]",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold mb-[4rem] text-center text-purple-heavy",children:"관리자 등록"}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"flex flex-row mb-4 w-full",children:[" ",(0,s.jsxs)("div",{className:"w-[50%] pr-5",children:[" ",(0,s.jsx)("label",{className:"block text-[18px] mb-2",htmlFor:"adminname",children:"담당자 이름 "}),(0,s.jsx)("input",{id:"adminname",name:"adminname",type:"text",value:l.adminname,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm rounded py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsxs)("div",{className:"w-[50%] px-5",children:[" ",(0,s.jsx)("label",{className:"block text-[18px] mb-2",htmlFor:"institute",children:"기관 이름 "}),(0,s.jsx)("input",{id:"institute",name:"institute",type:"institute",value:l.institute,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm rounded py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]})]}),(0,s.jsxs)("div",{className:"flex flex-row mb-4 w-full",children:[" ",(0,s.jsxs)("div",{className:"w-[50%] pr-5",children:[" ",(0,s.jsxs)("label",{className:"block text-[18px] mb-2",htmlFor:"email",children:["이메일 ",(0,s.jsx)("span",{className:"text-[15px] text-gray-20",children:" (연락 가능한 이메일로 작성해주세요.) "})]}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",value:l.email,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm w-full rounded py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsxs)("div",{className:"w-[50%] px-5",children:[(0,s.jsxs)("label",{className:"block text-[18px] mb-2",htmlFor:"mobilenumber",children:["전화번호 ",(0,s.jsx)("span",{className:"text-sm text-gray-20",children:" (01012345678 형태로 기입 - 번호만 기입) "})]}),(0,s.jsx)("input",{id:"mobilenumber",name:"mobilenumber",type:"text",value:l.mobilenumber,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm rounded w-full py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[" ",(0,s.jsx)("label",{className:"block text-[18px] mb-2",htmlFor:"password",children:"비밀번호 "}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",value:l.password,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm rounded w-[40%] py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[" ",(0,s.jsx)("label",{className:"block text-[18px] mb-2",htmlFor:"confirmPassword",children:"비밀번호 확인 "}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:j,required:!0,className:"appearance-none border-1 shadow-sm rounded w-[40%] py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"})]}),c&&(0,s.jsx)("div",{className:"mb-4 text-red-500",children:c}),(0,s.jsxs)("div",{className:"mb-4",children:[" ",(0,s.jsxs)("label",{className:"block text-[18px] mb-2",htmlFor:"address",children:["주소: "," "]}),(0,s.jsx)("input",{id:"address",type:"text",name:"address",value:l.address,onChange:j,readOnly:!0,required:!0,className:"appearance-none border-1 shadow-sm rounded w-[40%] py-2 px-3 text-gray-90 leading-tight focus:outline-none focus:shadow-outline"}),(0,s.jsx)("button",{type:"button",className:"ml-5 bg-gray-10 text-black text-[15px] py-2 px-4",onClick:()=>f(!0),children:"주소 찾기 "})]}),p&&(0,s.jsx)(d,{onComplete:e=>{let t=e.address,n="";"R"===e.addressType&&(""!==e.bname&&(n+=e.bname),""!==e.buildingName&&(n+=""!==n?", ".concat(e.buildingName):e.buildingName),t+=""!==n?" (".concat(n,")"):""),u({...l,address:t}),f(!1)},autoClose:!1,style:{width:"100%",height:"400px"}}),(0,s.jsxs)("div",{className:"mb-4",children:[" ",(0,s.jsxs)("label",{className:"block text-[18px] mb-2",htmlFor:"registerStudents",children:["학생 등록하기: ",(0,s.jsx)("span",{className:"text-[15px] text-gray-20",children:" 학생 정보를 업로드하려면 CSV 파일을 업로드하십시오. "})]}),(0,s.jsx)("input",{type:"file",id:"registerStudents",name:"studentlist",accept:".csv",onChange:e=>w(e,h)})]}),(0,s.jsxs)("div",{className:"mb-4",children:[" ",(0,s.jsxs)("label",{className:"block text-[18px] mb-2",htmlFor:"registerAdmins",children:["그룹별 관리자 등록하기: ",(0,s.jsx)("span",{className:"text-[15px] text-gray-20",children:" 그룹별 관리자 정보를 업로드하려면 CSV 파일을 업로드하십시오. "})]}),(0,s.jsx)("input",{type:"file",id:"registerAdmins",name:"groupadmin",accept:".csv",onChange:e=>w(e,g)})]}),(0,s.jsx)("div",{className:"mt-10 mb-6",children:(0,s.jsx)("button",{type:"submit",className:"bg-purple-heavy text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",children:"관리자로 등록하기 "})})]})]})})}},3501:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var s=n(7437),a=n(2265),l=n(1467);let r=(0,a.createContext)({url:"http://localhost:4000",token:"",setToken:()=>{}});t.Z=e=>{let{children:t}=e,[n,o]=(0,a.useState)(l.Z.getItem("token")||"");return(0,a.useEffect)(()=>{let e=l.Z.getItem("token");e&&(o(e),console.log("Token found in localStorage:",e))},[]),(0,s.jsx)(r.Provider,{value:{url:"http://localhost:4000",token:n,setToken:o},children:t})}},1467:function(e,t){"use strict";class n{static setItem(e,t){localStorage.setItem(e,t)}static getItem(e){return localStorage.getItem(e)}static removeItem(e){localStorage.removeItem(e)}constructor(){}}t.Z=n},7818:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var s=n(551),a=n.n(s)},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=n(9920);n(7437),n(2265);let a=s._(n(148));function l(e,t){var n;let s={loading:e=>{let{error:t,isLoading:n,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let l={...s,...t};return(0,a.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=n(5592);function a(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return n}},148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=n(7437),a=n(2265),l=n(912),r=n(1481);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},n=(0,a.lazy)(()=>t.loader().then(o)),d=t.loading;function u(e){let o=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(r.PreloadCss,{moduleIds:t.modules}):null,(0,s.jsx)(n,{...e})]}):(0,s.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(n,{...e})});return(0,s.jsx)(a.Suspense,{fallback:o,children:i})}return u.displayName="LoadableComponent",u}},1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let s=n(7437),a=n(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,a.getExpectedRequestStore)("next/dynamic css"),l=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,s.jsx)(s.Fragment,{children:l.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=9464)}),_N_E=e.O()}]);